<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Tutorial: Set up a Minecraft server on Linux :: Jackson&#39;s Computing Corner</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Recently, I decided to start hosting a Minecraft server for me and a few of my friends. While this was mostly because&amp;hellip;well&amp;hellip;I wanted to play Minecraft, it also occured to me that this is an excellent project for a less experienced user to familiarize themselves with some key skills and concepts that any Linux administrator will find useful.
By the end of this tutorial, we will have:
A Minecraft server running for the gaming enjoyment of you and your friends." />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="/posts/mc-server-tutorial/" />


  





  
  <link rel="stylesheet" href="/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="/css/code.min.00125962708925857e7b66dbc58391d55be1191a3d0ce2034de8c9cd2c481c36.css">

  
  <link rel="stylesheet" href="/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="/css/main.min.fe8dc560fccb53a458b0db19ccb7b265764ac46b68596b7e099c6793054dd457.css">

  
  <link rel="stylesheet" href="/css/menu.min.83637a90d903026bc280d3f82f96ceb06c5fc72b7c1a8d686afb5bbf818a29f7.css">

  
  <link rel="stylesheet" href="/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="/css/post.min.fc74ca360273c1d828da3c02b8174eba435607b369d98418ccc6f2243cd4e75d.css">

  
  <link rel="stylesheet" href="/css/prism.min.9023bbc24533d09e97a51a0a42a5a7bfe4c591ae167c5551fb1d2191d11977c0.css">

  
  <link rel="stylesheet" href="/css/syntax.min.cc789ed9377260d7949ea4c18781fc58959a89287210fe4edbff44ebfc1511b6.css">

  
  <link rel="stylesheet" href="/css/terminal.min.dd0bf9c7cacb24c1b0184f52f1869b274e06689557468cc7030ccf632328eb97.css">

  
  <link rel="stylesheet" href="/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">


<link rel="stylesheet" href="/terminal.css">




<link rel="shortcut icon" href="/favicon.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Tutorial: Set up a Minecraft server on Linux">
<meta property="og:description" content="Recently, I decided to start hosting a Minecraft server for me and a few of my friends. While this was mostly because&amp;hellip;well&amp;hellip;I wanted to play Minecraft, it also occured to me that this is an excellent project for a less experienced user to familiarize themselves with some key skills and concepts that any Linux administrator will find useful.
By the end of this tutorial, we will have:
A Minecraft server running for the gaming enjoyment of you and your friends." />
<meta property="og:url" content="/posts/mc-server-tutorial/" />
<meta property="og:site_name" content="Jackson&#39;s Computing Corner" />

  
  
  <meta property="og:image" content="/">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2024-09-26 19:45:44 -0600 MDT" />












</head>
<body>


<div class="container full">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Jackson&#39;s Computing Corner
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;â–¾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/posts">Posts</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/about" >About</a></li>
        
      
        
          <li><a href="/posts" >Posts</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="/posts/mc-server-tutorial/">Tutorial: Set up a Minecraft server on Linux</a>
  </h1>
  <div class="post-meta"><time class="post-date">2024-09-26</time><span class="post-author">Jackson Pyrah</span></div>

  
    <span class="post-tags">
      
      #<a href="/tags/gaming/">gaming</a>&nbsp;
      
      #<a href="/tags/server/">server</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <p>Recently, I decided to start hosting a Minecraft server for me and a few of my friends. While this was mostly because&hellip;well&hellip;I wanted to play Minecraft, it also occured to me that this is an excellent project for a less experienced user to familiarize themselves with some key skills and concepts that any Linux administrator will find useful.</p>
<p>By the end of this tutorial, we will have:</p>
<ul>
<li>A Minecraft server running for the gaming enjoyment of you and your friends.</li>
<li>A custom systemd service to supervise the server process.</li>
<li>Appropriately configured firewall rules to allow your friends access to the server.</li>
</ul>
<p>I will assume you already have a suitable system with any modern GNU/Linux distribution installed. For this tutorial, I will be using an Ampere Altra VPS from Oracle Cloud with AlmaLinux 9.4, but the instructions should be mostly identical for any systemd-based Linux distribution. Recommended specs for a Minecraft server depend heavily on which type of server you would like to run (vanilla, spigot, modded, etc) as well as how many players you are expecting to support, so I will not be going over this here.</p>
<p>You&rsquo;ll also need git and gcc installed for installing mcrcon.</p>
<p>With all that out of the way, let&rsquo;s jump in!</p>
<h1 id="prerequisites">Prerequisites<a href="#prerequisites" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>We&rsquo;ll start by obtaining a suitable version of Java depending on the Minecraft version we would like to host (more information on that <a href="https://docs.mcserversoft.com/advanced/java-version">here</a>). In my case, I am running a modded 1.20.1 server, so I&rsquo;ll install Java 17 with my distribution&rsquo;s package manager (adjust accordingly for your distribution).</p>
<pre tabindex="0"><code># dnf install java-17-openjdk 
</code></pre><p>Now we&rsquo;ll download and install <a href="https://github.com/Tiiffi/mcrcon">mcrcon</a> according to its official installation instructions. This is a basic command-line utility that will allow us to easily manage our server from the command line via the RCON protocol. A popular alternative to using RCON as the primary management interface is to simply launch the server in a screen/tmux session that we can attach to whenever you want to run commands from the server side, but I find this a bit clunky when used in combination with systemd, as we&rsquo;ll get to later.</p>
<pre tabindex="0"><code>$ git clone https://github.com/Tiiffi/mcrcon.git
$ cd mcrcon
$ make
$ sudo make install
</code></pre><p>Let&rsquo;s prepare the <code>minecraft</code> system user, as well as some directories.</p>
<pre tabindex="0"><code># useradd --system minecraft
# mkdir -p /opt/minecraft/{server,backup}
</code></pre><p>Our server will be installed into the <code>/opt/minecraft/server</code> directory. We also have a <code>backup</code> directory for world backups should we choose to utilize it.</p>
<h1 id="installing-the-minecraft-server">Installing the Minecraft server<a href="#installing-the-minecraft-server" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>Now it&rsquo;s time to download and install our Minecraft server. This will vary depending on the type of server you want to install, so I&rsquo;ve included some links to helpful documentation for each.</p>
<ul>
<li><a href="https://www.minecraft.net/en-us/download/server">Official vanilla server</a></li>
<li><a href="https://www.spigotmc.org/wiki/spigot-installation/">Spigot</a></li>
<li><a href="https://minecraft.fandom.com/wiki/Tutorials/Setting_up_a_Minecraft_Forge_server">Forge</a></li>
</ul>
<p>Once the server .jar file has been placed in the <code>/opt/minecraft/server</code> directory, I like to manually start the server at least once to generate the world and populate the directory with the various configuration files you can use to manage your server.</p>
<p>First let&rsquo;s change the ownership of the <code>/opt/minecraft</code> directory to the minecraft user.</p>
<pre tabindex="0"><code>$ sudo chown -R minecraft:minecraft /opt/minecraft
</code></pre><p>Accept the Minecraft <a href="https://aka.ms/MinecraftEULA">EULA</a> writing the following to <code>eula.txt</code>.</p>
<pre tabindex="0"><code>eula=true
</code></pre><p>Then we can start the server.</p>
<pre tabindex="0"><code># sudo -i -u minecraft
$ java -Xmx4096M -Xms1024M -jar server.jar --nogui
</code></pre><p>Change the <code>-Xmx</code> and <code>-Xms</code> arguments to your desired maximum and minimum RAM allocations respectively for the server, and <code>server.jar</code> to whatever the name of the jarfile for the server you are running is. Once the server is loaded you&rsquo;ll be dropped into the server console. Type <code>stop</code> to shutdown the server and exit back to your shell.</p>
<p>In the <code>server.properties</code> file, make sure you set the <code>rcon.password</code> field to a password of your choice and set <code>enable-rcon</code> to <code>true</code>.</p>
<h1 id="managing-the-server-with-systemd">Managing the server with systemd<a href="#managing-the-server-with-systemd" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>Lets start by creating some scripts in the server directory to start and stop our server.</p>
<pre tabindex="0"><code>#!/bin/sh

### start.sh

java -Xmx4096M -Xms1024M -jar server.jar --nogui
</code></pre><p>Like earlier, edit the Java arguments and jarfile name appropriately.</p>
<pre tabindex="0"><code>#!/bin/sh

### stop.sh

mcrcon -H localhost -p rconpassword &#39;stop&#39;
</code></pre><p>Set <code>rconpassword</code> to the password you set earlier in <code>server.properties</code>.</p>
<h3 id="note-for-selinux-users">Note for SELinux users:<a href="#note-for-selinux-users" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>If you&rsquo;re using SELinux, you&rsquo;ll have to change the context of these scripts to allow systemd to execute them.</p>
<pre tabindex="0"><code># semanage fcontext -a -t bin_t &#34;/opt/minecraft/server(/.*)?&#34;
# restorecon -R /opt/minecraft/server
</code></pre><p>In this case I just decided to change the context of the entire directory in case I wanted to add more/different scripts later.</p>
<p>Now we can create our systemd unit file in <code>/etc/systemd/system/minecraft.service</code>.</p>
<pre tabindex="0"><code>[Unit]
Description=Minecraft Server

Wants=network.target
After=network.target

[Service]
User=minecraft
WorkingDirectory=/opt/minecraft/server

ProtectHome=read-only
ProtectSystem=full
PrivateDevices=no
NoNewPrivileges=yes
PrivateTmp=no
InaccessiblePaths=/root /sys /srv /media -/lost+found
ReadWritePaths=/opt/minecraft

ExecStart=/opt/minecraft/server/run.sh
ExecStop=/opt/minecraft/server/stop.sh
Restart=always
RestartSec=10
</code></pre><p>This isn&rsquo;t a systemd tutorial so I won&rsquo;t be explaining in great detail what everything here does, but it&rsquo;s mostly self-explanatory. The middle section of the <code>[Service]</code> stanza contains a variety of options to help enhance the security of our system in case the Minecraft server is compromised.</p>
<p>Now that our systemd unit file is written, we can (as root) run <code>systemctl enable --now minecraft.service</code> to start the server and enable it at boot. We can now manage our server with the typical <code>systemctl</code> commands such as <code>stop</code>, <code>start</code>, <code>restart</code>, etc.</p>
<h1 id="allow-others-to-connect">Allow others to connect<a href="#allow-others-to-connect" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>The final step is to configure our system firewall to allow external connections to Minecraft. To do this we just need to open TCP port 25565.</p>
<pre tabindex="0"><code># firewall-cmd --permanent --add-port 25565/tcp
# firewall-cmd --reload
</code></pre><h3 id="all-done">All done!<a href="#all-done" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>That&rsquo;s it! We now have a fully functional Minecraft server for cozy gaming with friends. From here, you may want to refer to the Minecraft wiki to configure things such as the server whitelist, server operators, MOTD, etc.</p>
<p>We can make backups of your server&rsquo;s worldfile by simply compressing an archive of the <code>world</code> directory into the <code>/opt/minecraft/backup</code> folder we created earlier. If you&rsquo;re interested in getting automated backups setup, consider using a tool like <a href="https://restic.net/">Restic</a>.</p>

      </div></div>

  
    

  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>Â© 2024 Jackson Pyrah</span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
